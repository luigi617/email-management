<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Email Management</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <!-- header removed on purpose -->

  <main class="layout">
    <!-- LEFT: filters + mailbox + legend -->
    <aside class="sidebar">
      <!-- 1) Filters -->
      <section class="card">
        <h2>Search</h2>
        <label class="block-label">
          <input type="text" id="search-input" placeholder="Search" />
        </label>
        <button id="search-btn" type="button" class="secondary">
          Search
        </button>
      </section>

      <!-- 2) Mailboxes (info + list) -->
      <section class="card">
        <h2>Mailboxes</h2>
        <div id="mailbox-list" class="mailbox-list">
          <!-- Filled by JS from /api/emails/mailbox -->
        </div>
      </section>

      <!-- 3) Legend (of logged emails) -->
      <section class="card legend-box">
        <div class="legend-header">
          <h2>Legend</h2>
          <span class="legend-sub">Click to filter by sender (domain)</span>
        </div>
        <div id="legend-list" class="legend-list">
          <!-- Filled by JS with senders + colors -->
        </div>
      </section>
    </aside>

    <!-- MIDDLE: email overview (paged, scrollable) -->
    <section class="middle">
      <section class="card list-header">
        <div class="list-header-top">
          <h2>Emails</h2>
          <div class="page-controls">
            <button id="prev-page-btn" type="button" class="secondary">&lt;</button>
            <span id="page-info">Page 1 / 1</span>
            <button id="next-page-btn" type="button" class="secondary">&gt;</button>
          </div>
        </div>
      </section>

      <section class="card list-container">
        <div id="email-list" class="email-list">
          <!-- Email preview cards inserted by JS -->
        </div>
        <div id="list-empty" class="empty-state hidden">
          No emails match the current filters.
        </div>
      </section>
    </section>

    <!-- RIGHT: full email detail -->
    <section class="detail">
      <section class="card detail-card">
        <!-- No "Details" header to save vertical space -->

        <div id="detail-placeholder">
          <p class="placeholder-text">
            Select an email from the middle column to see its full content here.
          </p>
        </div>

        <div id="email-detail" class="email-detail hidden">
          <!-- Action toolbar -->
          <div class="detail-toolbar">
            <button type="button" class="icon-btn" id="btn-archive" title="Archive">ğŸ“¥</button>
            <button type="button" class="icon-btn" id="btn-delete" title="Delete">ğŸ—‘ï¸</button>
            <span class="toolbar-separator"></span>
            <button type="button" class="icon-btn" id="btn-reply" title="Reply">â†©ï¸</button>
            <button type="button" class="icon-btn" id="btn-reply-all" title="Reply all">ğŸ”</button>
            <button type="button" class="icon-btn" id="btn-forward" title="Forward">â¡ï¸</button>
            <span class="toolbar-spacer"></span>
            <button type="button" class="icon-btn" id="btn-move" title="Move">ğŸ“‚</button>
          </div>

          <!-- Move panel (toggles on Move) -->
          <div id="move-panel" class="move-panel hidden">
            <label>
              Move to:
              <select id="move-mailbox-select"></select>
            </label>
            <button type="button" class="secondary small" id="move-confirm">Move</button>
            <button type="button" class="secondary small" id="move-cancel">Cancel</button>
          </div>

          <!-- Single detail header (no duplicate) -->
          <div class="detail-header">
            <span class="detail-badge" id="detail-color-badge"></span>
            <div class="detail-meta">
              <div id="detail-subject" class="detail-subject"></div>
              <div id="detail-from" class="detail-line"></div>
              <div id="detail-to" class="detail-line"></div>
              <div id="detail-account" class="detail-line small"></div>
              <div id="detail-datetime" class="detail-line small"></div>
            </div>
          </div>
          <hr />

          <!-- HTML and plain text bodies -->
          <div id="detail-body-html" class="detail-body html hidden"></div>
          <pre id="detail-body-text" class="detail-body text hidden"></pre>
        </div>
      </section>
    </section>
  </main>

  <script src="/static/app.js"></script>
</body>
</html>
